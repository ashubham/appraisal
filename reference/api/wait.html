<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../assets/style.css?t=615badd5">
    <link rel="stylesheet" href="https://ricostacruz.com/docpress-rsc/style.css">
    <link rel="stylesheet" href="../../assets/custom.css?t=31384f59">
    <script src="../../assets/script.js?t=42463e55"></script>
    <title>wait - Custody</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1"><a class="link title  link-index" href="../../index.html">Custody</a>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Quick Start</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-starttutorial" href="../../start/tutorial.html">Tutorial</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Reference</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a class="link title  link-referenceconfig" href="../../reference/config.html">Configuation</a>
                </li>
                <li class="menu-item -level-2 -parent"><span class="title">API Reference</span>
                  <ul class="submenu">
                    <li class="menu-item -level-3"><a class="link title  link-referenceapipostmessage" href="../../reference/api/postMessage.html">postMessage</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-referenceapiuploadfile" href="../../reference/api/uploadFile.html">uploadFile</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-referenceapisleep" href="../../reference/api/sleep.html">sleep</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-referenceapigetlastmessage" href="../../reference/api/getLastMessage.html">getLastMessage</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-referenceapiwaitresponse" href="../../reference/api/waitResponse.html">waitForResponseToBe</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title  link-referenceapiwaitfile" href="../../reference/api/waitFile.html">waitForFileShare</a>
                    </li>
                    <li class="menu-item -level-3"><a class="link title -active link-referenceapiwait" href="../../reference/api/wait.html">wait</a>
                      <ul class="headings heading-list">
                        <li class="heading-item -depth-3"><a class="hlink link-returns" href="#returns">Returns</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li class="menu-item -level-2 -parent"><span class="title">How it works</span>
                  <ul class="submenu">
                    <li class="menu-item -level-3"><a class="link title  link-referencehownormalization" href="../../reference/how/normalization.html">Normalization</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </div>
      <div class="body page-referenceapiwait">
        <div class="header-nav">
          <div class="right"><a class="iconlink" href="https://github.com/ashubham/custody" data-title="ashubham/custody">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="csty.wait">csty.wait</h1>
<p>Schedules a command to wait for a condition to hold or promise to be resolved.</p>
<p>This function blocks Custody&#x2019;s control flow, not the javascript runtime. It will only delay future custody commands from being executed (e.g. it will cause Custody to wait before sending future commands to the chat platform).</p>
<p>This function returnes a promise, which can be used if you need to block javascript execution and not just the control flow.</p>
<p>Example: Suppose you have a function, startTestServer, that returns a promise for when a server is ready for requests. You can block a Custody client on this promise with:</p>
<pre><code class="lang-js"><span class="pl-k">var</span> started = startTestServer();
csty.wait(started, <span class="pl-s">&apos;Server should start within 5 seconds&apos;</span>, <span class="hljs-number">5</span> * <span class="hljs-number">1000</span>);
csty.postMessage(<span class="pl-s">&apos;Are you up?&apos;</span>);
</code></pre>
<table>
<thead>
<tr>
<th>Param</th>
<th style="text-align:center">Type</th>
<th style="text-align:center">Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>condition</td>
<td style="text-align:center">Promise<t></t></td>
<td style="text-align:center">function(): T</td>
<td></td>
</tr>
<tr>
<td>opt_message</td>
<td style="text-align:center">string</td>
<td style="text-align:center">&#x2018;&#x2019;</td>
<td>An optional message to use to denote waiting.</td>
</tr>
<tr>
<td>opt_timeout</td>
<td style="text-align:center">number</td>
<td style="text-align:center">config.defaultTimeout</td>
<td>How long to wait for the condition to be true.</td>
</tr>
</tbody>
</table>
<h3 id="returns">Returns</h3>
<table>
<thead>
<tr>
<th>Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Promise&lt;T&gt;</td>
<td style="text-align:left">A promise that will be fulfilled with the first truthy value returned by the condition function, or rejected if the condition times out.</td>
</tr>
</tbody>
</table>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="../../reference/api/waitFile.html"><span class="title">waitForFileShare</span></a></div>
          <div class="right"><a href="../../reference/how/normalization.html"><span class="label">Next: </span><span class="title">Normalization</span></a></div>
        </div>
      </div>
    </div>
  </body>
</html>